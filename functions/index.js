!function(n,t){for(var e in t)n[e]=t[e]}(this,function(n){var t={};function e(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:r})},e.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e.w={},e(e.s=9)}([function(n,t){n.exports=require("firebase-functions")},function(n,t){n.exports=require("firebase-admin")},function(n,t,e){const r=e(1);e(0);r.initializeApp();const i=r.database().ref("approvals");n.exports={Query:{approvals:()=>i.once("value").then(n=>{const t=n.val();return null===t?[]:Object.keys(t).map(n=>Object.assign({id:n},t[n]))}),approval:(n,{id:t})=>r.database().ref(`approvals/${t}`).once("value").then(n=>{const e=n.val();return Object.assign({id:t},e)})},Mutation:{createApproval:(n,{input:t})=>new Promise(n=>{const e=i.push(t,()=>{n(Object.assign({id:e.key},t))})}),updateApproval(n,{input:t}){const e=i.child(t.id);return e.once("value").then(n=>{const t=n.val();if(null===t)throw new Error("404");return t}).then(n=>{const r=Object.assign(n,t);return delete r.id,e.set(r).then(()=>Object.assign({id:t.id},r))})},deleteApproval(n,{input:t}){const e=i.child(t.id);return e.once("value").then(n=>{const e=n.val();if(null===e)throw new Error("404");return Object.assign({id:t.id},e)}).then(n=>e.remove().then(()=>n))}}}},function(n,t){n.exports=require("graphql-tools")},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=e(3),i=e(2);n.exports=r.makeExecutableSchema({typeDefs:"\ntype Settings {\n  opt_in : Boolean,\n  timezone : String\n}\ntype Publish {\n  settings : Settings \n  status : String,\n  updated_at : String\n}\n\ninput ApprovalCreateInput {\n  name: String\n}\n\ninput ApprovalInput {\n  id: String\n  category : String\n  connection_id : String\n  content : String\n  created_at : Int,\n  created_by : String\n  edited_by : String\n  image : String\n  oid : String\n  original_content : String\n  source : String\n  status : String\n  uid : String\n  updated_at : String\n  updated_by : String\n}\ninput ApprovalDeleteInput {\n  id: String!\n}\ntype Approval {\n  id: String\n  category : String\n  connection_id : String\n  content : String\n  created_at : Int,\n  created_by : String\n  edited_by : String\n  image : String\n  oid : String\n  original_content : String\n  publish :  Publish \n  publish_at : String\n  publish_at_str : String\n  publish_date : String\n  publish_status : String\n  source : String\n  status : String\n  uid : String\n  updated_at : String\n  updated_by : String\n}\ntype Query {\n  approvals: [Approval]\n  approval(id: String!): Approval\n}\ntype Mutation {\n  createApproval(input: ApprovalCreateInput!): Approval\n  updateApproval(input: ApprovalInput): Approval\n  deleteApproval(input: ApprovalDeleteInput): Approval\n}\n",resolvers:i})},function(n,t){n.exports=require("graphql/utilities/schemaPrinter")},function(n,t){n.exports=require("apollo-server-express")},function(n,t){n.exports=require("cors")},function(n,t){n.exports=require("express")},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=e(8),i=e(7),o=e(0),a=e(6),p=e(5),s=e(4),u=r();u.use(i()),u.options("*",i()),u.use((n,t,e)=>(t.setHeader("Cache-Control","no-cache, no-store, must-revalidate"),e())),u.use("/graphql",a.graphqlExpress({schema:s})),u.use("/graphiql",a.graphiqlExpress({endpointURL:"/api/graphql"})),u.use("/schema",(n,t)=>{t.set("Content-Type","text/plain"),t.send(p.printSchema(s))}),t.api=o.https.onRequest(u)}]));